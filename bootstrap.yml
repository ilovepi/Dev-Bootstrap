---
- hosts: all
  vars: 
    spf13_output_file_name: spf13-script.sh
  roles:
      - role: gantsign.oh-my-zsh
        users:
            - username: vagrant
              oh_my_zsh:
                  theme: agnoster
                  plugins:
                      - git
                      - git-extras
                      - colorize
                      - colored-man-pages
                      - ubuntu
                      - wd
                      - gnu-utils
                      - nmap
                      - npm
                      - nvm
                      - python
                      - rsync
                      - systemadmin
                      - terminator
                      - common-aliases
                      - zsh-syntax-highlighting

      - role: mjanser.powerline

  become: true
  become_method: sudo
  tasks:
      - name: update apt cache
        apt: update_cache=yes
      - name: install bareflank deps
        apt: name={{item}} state=present
        #apt: name=flex state=present
        with_items:
            - software-properties-common
            - python-software-properties
            - apt-transport-https
            - ca-certificates
            - cmake
            - docker
            - build-essential
            - linux-headers-4.4.0-45-generic
            - libgmp-dev
            - libmpc-dev
            - libmpfr-dev
            - flex
            - bison
            - nasm
            - texinfo

      - name: install usability packages
        apt: name={{item}} state=present
        with_items:
            - vim
            - curl
            - wget
            - git
            - zsh

      - name: Download spf13 vim install script
        command: curl http://j.mp/spf13-vim3 -L -o {{ spf13_output_file_name }}

      - name: launch spf13 install script
        command: sh {{ spf13_output_file_name }}
